(function(a){a.fn.marquee=function(b){return this.each(function(){var Z=a.extend({},a.fn.marquee.defaults,b),Y=a(this),X,H,V=3,i="animation-play-state",O=!1,G=function(h,g,m){for(var k=["webkit","moz","MS","o",""],l=0;l<k.length;l++){k[l]||(g=g.toLowerCase()),h.addEventListener(k[l]+g,m,!1)}},s=function(e){var d=[],g;for(g in e){e.hasOwnProperty(g)&&d.push(g+":"+e[g])}d.push();return"{"+d.join(",")+"}"},R={pause:function(){O&&Z.allowCss3Support?X.css(i,"paused"):a.fn.pause&&X.pause();Y.data("runningStatus","paused");Y.trigger("paused")},resume:function(){O&&Z.allowCss3Support?X.css(i,"running"):a.fn.resume&&X.resume();Y.data("runningStatus","resumed");Y.trigger("resumed")},toggle:function(){R["resumed"==Y.data("runningStatus")?"pause":"resume"]()},destroy:function(){clearTimeout(Y.timer);Y.find("*").addBack().unbind();Y.html(Y.find(".js-marquee:first").html())}};if("string"===typeof b){a.isFunction(R[b])&&(X||(X=Y.find(".js-marquee-wrapper")),!0===Y.data("css3AnimationIsSupported")&&(O=!0),R[b]())}else{var x;a.each(Z,function(g,e){x=Y.attr("data-"+g);if("undefined"!==typeof x){switch(x){case"true":x=!0;break;case"false":x=!1}Z[g]=x}});Z.speed&&(Z.duration=parseInt(Y.width(),10)/Z.speed*1000);var o="up"==Z.direction||"down"==Z.direction;Z.gap=Z.duplicated?parseInt(Z.gap):0;Y.wrapInner('<div class="js-marquee"></div>');var T=Y.find(".js-marquee").css({"margin-right":Z.gap,"float":"left"});Z.duplicated&&T.clone(!0).appendTo(Y);Y.wrapInner('<div style="width:100000px" class="js-marquee-wrapper"></div>');X=Y.find(".js-marquee-wrapper");if(o){var S=Y.height();X.removeAttr("style");Y.height(S);Y.find(".js-marquee").css({"float":"none","margin-bottom":Z.gap,"margin-right":0});Z.duplicated&&Y.find(".js-marquee:last").css({"margin-bottom":0});var M=Y.find(".js-marquee:first").height()+Z.gap;Z.startVisible&&!Z.duplicated?(Z._completeDuration=(parseInt(M,10)+parseInt(S,10))/parseInt(S,10)*Z.duration,Z.duration*=parseInt(M,10)/parseInt(S,10)):Z.duration*=(parseInt(M,10)+parseInt(S,10))/parseInt(S,10)}else{var Q=Y.find(".js-marquee:first").width()+Z.gap;var P=Y.width();Z.startVisible&&!Z.duplicated?(Z._completeDuration=(parseInt(Q,10)+parseInt(P,10))/parseInt(P,10)*Z.duration,Z.duration*=parseInt(Q,10)/parseInt(P,10)):Z.duration*=(parseInt(Q,10)+parseInt(P,10))/parseInt(P,10)}Z.duplicated&&(Z.duration/=2);if(Z.allowCss3Support){T=document.body||document.createElement("div");var U="marqueeAnimation-"+Math.floor(10000000*Math.random()),N=["Webkit","Moz","O","ms","Khtml"],L="animation",W="",K="";T.style.animation&&(K="@keyframes "+U+" ",O=!0);if(!1===O){for(var f=0;f<N.length;f++){if(void 0!==T.style[N[f]+"AnimationName"]){T="-"+N[f].toLowerCase()+"-";L=T+L;i=T+i;K="@"+T+"keyframes "+U+" ";O=!0;break}}}O&&(W=U+" "+Z.duration/1000+"s "+Z.delayBeforeStart/1000+"s infinite "+Z.css3easing,Y.data("css3AnimationIsSupported",!0))}var J=function(){X.css("transform","translateY("+("up"==Z.direction?S+"px":"-"+M+"px")+")")},I=function(){X.css("transform","translateX("+("left"==Z.direction?P+"px":"-"+Q+"px")+")")};Z.duplicated?(o?Z.startVisible?X.css("transform","translateY(0)"):X.css("transform","translateY("+("up"==Z.direction?S+"px":"-"+(2*M-Z.gap)+"px")+")"):Z.startVisible?X.css("transform","translateX(0)"):X.css("transform","translateX("+("left"==Z.direction?P+"px":"-"+(2*Q-Z.gap)+"px")+")"),Z.startVisible||(V=1)):Z.startVisible?V=2:o?J():I();var j=function(){Z.duplicated&&(1===V?(Z._originalDuration=Z.duration,Z.duration=o?"up"==Z.direction?Z.duration+S/(M/Z.duration):2*Z.duration:"left"==Z.direction?Z.duration+P/(Q/Z.duration):2*Z.duration,W&&(W=U+" "+Z.duration/1000+"s "+Z.delayBeforeStart/1000+"s "+Z.css3easing),V++):2===V&&(Z.duration=Z._originalDuration,W&&(U+="0",K=a.trim(K)+"0 ",W=U+" "+Z.duration/1000+"s 0s infinite "+Z.css3easing),V++));o?Z.duplicated?(2<V&&X.css("transform","translateY("+("up"==Z.direction?0:"-"+M+"px")+")"),H={transform:"translateY("+("up"==Z.direction?"-"+M+"px":0)+")"}):Z.startVisible?2===V?(W&&(W=U+" "+Z.duration/1000+"s "+Z.delayBeforeStart/1000+"s "+Z.css3easing),H={transform:"translateY("+("up"==Z.direction?"-"+M+"px":S+"px")+")"},V++):3===V&&(Z.duration=Z._completeDuration,W&&(U+="0",K=a.trim(K)+"0 ",W=U+" "+Z.duration/1000+"s 0s infinite "+Z.css3easing),J()):(J(),H={transform:"translateY("+("up"==Z.direction?"-"+X.height()+"px":S+"px")+")"}):Z.duplicated?(2<V&&X.css("transform","translateX("+("left"==Z.direction?0:"-"+Q+"px")+")"),H={transform:"translateX("+("left"==Z.direction?"-"+Q+"px":0)+")"}):Z.startVisible?2===V?(W&&(W=U+" "+Z.duration/1000+"s "+Z.delayBeforeStart/1000+"s "+Z.css3easing),H={transform:"translateX("+("left"==Z.direction?"-"+Q+"px":P+"px")+")"},V++):3===V&&(Z.duration=Z._completeDuration,W&&(U+="0",K=a.trim(K)+"0 ",W=U+" "+Z.duration/1000+"s 0s infinite "+Z.css3easing),I()):(I(),H={transform:"translateX("+("left"==Z.direction?"-"+Q+"px":P+"px")+")"});Y.trigger("beforeStarting");if(O){X.css(L,W);var d=K+" { 100%  "+s(H)+"}",c=X.find("style");0!==c.length?c.filter(":last").html(d):a("head").append("<style>"+d+"</style>");G(X[0],"AnimationIteration",function(){Y.trigger("finished")});G(X[0],"AnimationEnd",function(){j();Y.trigger("finished")})}else{X.animate(H,Z.duration,Z.easing,function(){Y.trigger("finished");Z.pauseOnCycle?Y.timer=setTimeout(j,Z.delayBeforeStart):j()})}Y.data("runningStatus","resumed")};Y.bind("pause",R.pause);Y.bind("resume",R.resume);Z.pauseOnHover&&(Y.bind("mouseenter",R.pause),Y.bind("mouseleave",R.resume));O&&Z.allowCss3Support?j():Y.timer=setTimeout(j,Z.delayBeforeStart)}})};a.fn.marquee.defaults={allowCss3Support:!0,css3easing:"linear",easing:"linear",delayBeforeStart:1000,direction:"left",duplicated:!1,duration:5000,gap:20,pauseOnCycle:!1,pauseOnHover:!1,startVisible:!1}})(jQuery);